# Kingdom Mind - The Master Ledger

> **Mission:** To build a "Living Digital Sanctuary" that guides users through a 7-domain journey of transformation using high-intelligence AI, spatial UI, and biblical wisdom.

---

## 1. Core Philosophy (The "Fluid Reality")
**Kingdom Mind** is not an app; it is a **Conversational Operating System.**
- **Zero-UI:** No buttons, no menus. The interface is pure text and space.
- **One-Way Flow:** Thoughts are "launched" into the void. They never flicker back. The past evaporates; only the "Now" remains.
- **Spatial Memory:** History is not a list; it is a **Star Map.** Every conversation builds a galaxy in the background.
- **The Pulse:** The system breathes. A central heartbeat indicates thought, creating a rhythm of "Speak -> Silence -> Wisdom."

---

## 2. Current Architecture (The "Infinite Horizon" OS)

### **Frontend (The Canvas)**
- **Tech:** Next.js 15, Framer Motion, Tailwind CSS v4.
- **Visuals:**
  - **Deep Obsidian:** Permanent dark mode for "Midnight Sky" visibility.
  - **Bioluminescence:** Domain labels and constellation lines glow to cut through the dark.
  - **Nebula Engine:** A high-performance HTML5 Canvas particle system that renders "Stardust" based on the user's interaction count.
- **Mobile ("Sanctuary Lite"):**
  - **Vertical Drift:** Messages flow upward (smoke) instead of outward (radial).
  - **Thumb-Zone:** Input box floats above the keyboard using the `VisualViewport` API to prevent layout crushing.
  - **Battery Saver:** Particle count reduced by 70% on small screens.

### **Backend (The Brain)**
- **Model:** X.AI (Grok-4-Latest).
- **Protocol:** "The Silent Strategist" (v2.2).
- **Tools:**
  - `assessMood`: Detects emotional subtext (Radar).
  - `searchMemory`: Scans past insights for patterns (Memory Palace).
  - `checkConsistency`: Verifies if the user is keeping their promises (The Skeptic).
  - `setHabit`: Anchors breakthroughs into physical reality.
  - `updateUser`: Handles the "Initiation Ritual" for new souls.

---

## 3. The "Silent Strategist" Protocol
The AI is strictly governed by the following rules to prevent "Robot Fatigue":
1.  **3-Sentence Lockdown:** No paragraphs. Tactical brevity only.
2.  **Clean Memory:** Never reference past breakthroughs (like ADHD) unless the user brings them up first. Every session is a fresh start.
3.  **Invisible Infrastructure:** Never announce tool usage ("I am setting a habit"). Just do it.
4.  **The 3-Act Curriculum:**
    *   **Act I:** Excavate the Lie.
    *   **Act II:** Confront with Truth (Scripture).
    *   **Act III:** Anchor with Action (Habit).

---

## 4. Decision Log (The History of Pivots)

| Date | Decision | Rationale |
| :--- | :--- | :--- |
| **Jan 07, 2026** | **The Great Clearing** | Removed all sidebars and chat history bubbles. The screen must be empty to focus on the "Now." |
| **Jan 07, 2026** | **One-Way Launch** | Decoupled local state from server state. User text flies off screen and never re-renders to prevent flicker. |
| **Jan 07, 2026** | **Initiation Protocol** | Replaced standard "Hello" with a structured "Name & Burden" intake for new users. |
| **Jan 07, 2026** | **Visual Viewport Fix** | Switched from `100vh` to `100svh` and added a listener to handle mobile keyboard resizing gracefully. |
| **Jan 07, 2026** | **Sovereignty Switch** | Created `#activate` mode for Admin control directly within the chat interface. |

---

## 5. The Roadmap (Future Vision)

### **Phase 1: The Covenant (Payments)**
*   **Goal:** Integrate QuickBooks Online (QBO) for a "Conversational Commerce" flow.
*   **Strategy:** "Free-to-Start, Subscribe-to-Ascend."
*   **Trigger:** User completes Domain 1 (Identity) -> AI presents the Covenant (Subscription) to unlock Purpose.
*   **Tech:** QBO Recurring Sales Receipts + Webhooks.

### **Phase 2: The Socratic Sniper (Deep Tuning)**
*   **Goal:** Enhance the prompt to ask devastatingly good questions.
*   **Method:** Use the local `test-prompt.ts` lab to iterate until the AI stops giving advice and starts uncovering root causes.

### **Phase 3: The Parable Engine**
*   **Goal:** A tool that generates custom stories based on the user's specific life context (e.g., a story about a coder for a developer).

---

*This document is the Law of the Project. All future code must align with these pillars.*
